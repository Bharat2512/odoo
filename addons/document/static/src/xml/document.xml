<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="IrValuesFileSection" t-extend="IrValuesSection">
        <t t-jquery=".dropdown-toggle" t-operation="prepend">
            <t t-if="widget.name == 'files'" t-raw="widget.items.length || ''"/>
        </t>
        <t t-jquery="li[t-foreach]" t-operation="prepend">
            <t t-if="widget.name == 'files'">
                <t t-set="item.title">
                    <b>Attachment : </b><br/>
                    <t t-raw="item.name"/>
                </t>
                <t t-if="item.create_uid and item.create_uid[0]" t-set="item.title">
                    <t t-raw="item.title"/><br/>
                    <b>Created by : </b><br/>
                    <t t-raw="item.create_uid[1] + ' ' + item.create_date"/>
                </t>
                <t t-if="item.create_uid and item.write_uid and item.create_uid[0] != item.write_uid[0]" t-set="item.title">
                    <t t-raw="item.title"/><br/>
                    <b>Modified by : </b><br/>
                    <t t-raw="item.write_uid[1] + ' ' + item.write_date"/>
                </t>
            </t>
        </t>
        <t t-jquery="li[t-foreach] a" t-operation="prepend">
            <span t-if="widget.name == 'files' and widget.options.editable and !item.callback" class="fa fa-trash-o o_sidebar_delete_attachment" t-att-data-id="item.id" title="Delete this attachment"/>
        </t>
        <t t-jquery="li[t-foreach]" t-operation="after">
            <li t-if="widget.name == 'files' and widget.options.editable" class="o_sidebar_add_attachment">
                <t t-call="HiddenInputFile">
                    <t t-set="fileupload_id" t-value="widget.fileupload_id"/>
                    <t t-set="fileupload_action" t-translation="off">/web/binary/upload_attachment</t>
                    <input type="hidden" name="model" t-att-value="widget.dataset and widget.dataset.model"/>
                    <input type="hidden" name="id" t-att-value="widget.model_id"/>
                    <input type="hidden" name="session_id" t-att-value="widget.session.session_id" t-if="widget.session.override_session"/>
                    <span>Add...</span>
                </t>
            </li>
        </t>
    </t>    
</templates>
