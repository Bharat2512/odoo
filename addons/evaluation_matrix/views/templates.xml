<openerp>
    <data>
        <template id="assets_frontend" name="evaluation matrix assets" inherit_id="website.assets_frontend">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/evaluation_matrix/static/src/js/evaluation_matrix.js"></script>
                <link rel="stylesheet" href="/evaluation_matrix/static/src/css/evaluation_matrix.css"/>
            </xpath>
        </template>

        <template id="index" name="Selection comparison">
            <t t-call="website.layout">
                <t t-set="title">Review</t>
                <div class="oe_structure">
                    <div class="container">
                        <a href="/comparison/">All</a>
                    </div>
                </div>
            </t>
        </template>

        <template id="comparison" name="Comparison Table">
            <t t-call="website.layout">
                <t t-set="title">Comparison</t>
                <div class="oe_structure">
                    <div class="container">
                        <table class="table oe_table-comparison-factors">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th></th>
                                    <th width="10"></th>
                                    <th></th>
                                    <t t-foreach="comparison_products" t-as="comparison_product">
                                        <th class="oe_comparison-product center-text-cell" t-att-product-id="comparison_product.id" width="200"><t t-esc="comparison_product.name"/></th>
                                    </t>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="comparison_categories" t-as="comparison_category">
                                    <tr class="row-level-1" t-att-factor-id="comparison_category.id">
                                        <td><t t-esc="comparison_category.name"/></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <t t-foreach="comparison_products" t-as="comparison_product">
                                            <td class="center-text-cell vert-align">
                                                <a t-attf-href="##{comparison_category.name}">
                                                    <div class="progress">
                                                        <div t-attf-class="progress-bar #{ 'progress-bar-success' if comparison_results[comparison_category.id][comparison_product.id] &gt;= 80  else 'progress-bar-danger' if comparison_results[comparison_category.id][comparison_product.id] &lt;= 40 else 'progress-bar-primary'}" role="progressbar" t-attf-aria-valuenow="#{comparison_results[comparison_category.id][comparison_product.id]}" aria-valuemin="0" aria-valuemax="100" t-attf-style="width: #{comparison_results[comparison_category.id][comparison_product.id]}%;">
                                                            <span>
                                                                <t t-esc="comparison_results[comparison_category.id][comparison_product.id]"/>
                                                            </span> %
                                                        </div>
                                                    </div>
                                                </a>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                                <t t-foreach="comparison_categories" t-as="comparison_category">
                                    <tr t-attf-class="separation-categories">
                                        <td><a t-attf-name="#{comparison_category.name}"></a></td>
                                        <td></td>
                                        <td></td>
                                        <td class="center-text-cell">Ponderation</td>
                                        <t t-foreach="comparison_products" t-as="comparison_product">
                                            <td class="center-text-cell"><b><t t-esc="comparison_product.name"/></b></td>
                                        </t>
                                    </tr>
                                    <tr class="row-level-1" t-att-factor-id="comparison_category.id">
                                        <td><a href=""><t t-esc="comparison_category.name"/></a></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <t t-foreach="comparison_products" t-as="comparison_product">
                                            <td class="center-text-cell vert-align">
                                                <div class="progress">
                                                    <div t-attf-class="progress-bar #{ 'progress-bar-success' if comparison_results[comparison_category.id][comparison_product.id] &gt;= 80  else 'progress-bar-danger' if comparison_results[comparison_category.id][comparison_product.id] &lt;= 40 else 'progress-bar-primary'}" role="progressbar" t-attf-aria-valuenow="#{comparison_results[comparison_category.id][comparison_product.id]}" aria-valuemin="0" aria-valuemax="100" t-attf-style="width: #{comparison_results[comparison_category.id][comparison_product.id]}%;">
                                                        <span>
                                                            <t t-esc="comparison_results[comparison_category.id][comparison_product.id]"/>
                                                        </span> %
                                                    </div>
                                                </div>
                                            </td>
                                        </t>
                                    </tr>
                                    <t t-foreach="comparison_category.child_ids" t-as="comparison_factor">
                                        <tr class="row-level-1" t-att-factor-id="comparison_factor.id" data-children="hidden">
                                            <td>
                                                <t t-esc="comparison_factor.name"/>
                                            </td>
                                            <td>
                                                <a t-if= "len(comparison_factor.child_ids) != 0" class="show-children">
                                                    <i height="20" width="20" class="fa fa-search"></i>
                                                </a>
                                            </td>
                                            <td></td>
                                            <td class="ponderation">
                                                <t t-esc="comparison_factor.ponderation"/>
                                                <span class="pond"> 
                                                    <a href="" class="oe_up-ponderation">
                                                        <i style='color:green' class='fa fa-arrow-circle-o-up fa-2x'></i>
                                                    </a> 
                                                    <a href="" class="oe_down-ponderation">
                                                        <i style='color:red' class='fa fa-arrow-circle-o-down fa-2x'></i>
                                                    </a>
                                                </span>
                                            </td>
                                            <t t-foreach="comparison_products" t-as="comparison_product">
                                                <td t-attf-class="center-text-cell #{'votes' if comparison_factor.type == 'criterion' else ''}">
                                                    <div t-attf-class="#{ 'votes-green' if comparison_results[comparison_factor.id][comparison_product.id] &gt;= 80  else 'votes-red' if comparison_results[comparison_factor.id][comparison_product.id] &lt;= 40 else 'votes-blue'} votes-result">
                                                        <span>
                                                            <t t-esc="comparison_results[comparison_factor.id][comparison_product.id]"/> 
                                                        </span> %
                                                    </div>
                                                    <div class="votes-buttons">
                                                        <button type="button" class="btn btn-danger"><i class="fa fa-close"></i></button>
                                                        <button type="button" class="btn btn-info">3rd Party</button>
                                                        <button type="button" class="btn btn-success"><i class="fa fa-check"></i></button>
                                                    </div>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <tr class="row-level-1" t-att-parent-id="comparison_category.id">
                                        <td>
                                            <button type="button" class="btn btn-default oe_create-criterion"><i class="fa fa-plus"></i> Propose new criterion </button>
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <t t-foreach="comparison_products" t-as="comparison_product">
                                            <td></td>
                                        </t>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </div>
            </t>
        </template> 
        
        <menuitem sequence="0" id="main_evaluation_matrix_menu" name="Evaluation Matrix"/>
        <menuitem id="evaluation_matrix_menu" name="Evaluation Matrix" parent="main_evaluation_matrix_menu"/>
        

        <record model="ir.actions.act_window" id="comparison_factors_list_action">
            <field name="name">Comparison Factors</field>
            <field name="res_model">comparison_factor</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="comparison_factors_menu" name="Comparison Factors" parent="evaluation_matrix_menu" action="comparison_factors_list_action" sequence="1"/>
        

        <record model="ir.actions.act_window" id="comparison_items_list_action">
            <field name="name">Comparison Items</field>
            <field name="res_model">comparison_item</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="comparison_items_menu" name="Comparison Items" parent="evaluation_matrix_menu" action="comparison_items_list_action" sequence="2"/>

    </data>
</openerp>