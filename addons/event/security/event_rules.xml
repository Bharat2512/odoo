<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>

        <record model="ir.rule" id="event_professor_own_course">
            <field name="name">Professor's own course</field>
            <field name="model_id" ref="model_event_course"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('speakerinfo_ids.speaker_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('event.group_event_professor'))]"/>
        </record>

        <record model="ir.rule" id="event_professor_list_course_material">
            <field name="name">Professor list course material</field>
            <field name="model_id" ref="model_event_course_material"/>
            <field name="global" eval="False"/>
            <field name="domain_force">['|', ('course_id','=',False),('course_id.speakerinfo_ids.speaker_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('event.group_event_professor'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <record model="ir.rule" id="event_professor_edit_course_material">
            <field name="name">Professor edit course material</field>
            <field name="model_id" ref="model_event_course_material"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('create_uid', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('event.group_event_professor'))]"/>
            <field name="perm_read" eval="False"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <record model="ir.rule" id="event_professor_list_seance_participant">
            <field name="name">Professor - list seances participants of seances with own participation</field>
            <field name="model_id" ref="model_event_participation"/>
            <field name="domain_force">['&amp;',('role','=','participant'),'|',('seance_id.main_speaker_id','=',user.partner_id.id),('seance_id.other_resource_ids', 'in', [user.partner_id.id])]</field>
            <field name="global" eval="False"/>
            <field name="groups" eval="[(4, ref('event.group_event_professor'))]"/>
        </record>

        <record model="ir.rule" id="event_professor_list_content">
            <field name="name">Professor - disallow listing event content</field>
            <field name="model_id" ref="model_event_content"/>
            <field name="domain_force">[('id', '=', False)]</field>
            <field name="global" eval="False"/>
            <field name="groups" eval="[(4, ref('event.group_event_professor'))]"/>
        </record>

        <record model="ir.rule" id="event_professor_event_report_resource">
            <field name="name">Professor - event resource report</field>
            <field name="model_id" ref="model_report_event_resource"/>
            <field name="domain_force">[('resource_id','=',user.partner_id.id)]</field>
            <field name="global" eval="False"/>
            <field name="groups" eval="[(4, ref('event.group_event_professor'))]"/>
        </record>

    </data>
</openerp>
