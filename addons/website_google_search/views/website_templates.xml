<?xml version="1.0" encoding="utf-8"?>

<openerp>
    <data>

        <template id="layout" inherit_id="website.layout" name="Google Search Layout">
            <xpath expr="//head" position="inside">
                <t t-if="website.google_search_published">
                    <script type="text/javascript">
                        (function () {
                            var cx = _.str.trim('<t t-esc="website.google_search_cx"/>');
                            var gcse = document.createElement('script');
                            gcse.type = 'text/javascript';
                            gcse.async = true;
                            gcse.src = (document.location.protocol === 'https' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;
                            var s = document.getElementsByTagName('script')[0];
                            s.parentNode.insertBefore(gcse, s);
                        })();
                    </script>
                </t>
            </xpath>
            <xpath expr="//main" position="before">
                <div class="container">
                    <div class="row">
                        <div t-if="website.google_search_published" class="col-md-4 col-md-offset-8" name="google_custom_search">
                            <div class="gcse-search"></div>
                        </div>
                    </div>
                </div>
            </xpath>
            <xpath expr="//t[@t-if='website.google_analytics_key']" position="after">
                <link rel="stylesheet" href="/website_google_search/static/src/css/base.css"/>
            </xpath>
        </template>

    </data>
</openerp>
